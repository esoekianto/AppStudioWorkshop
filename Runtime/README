
Layer Visibility Hands-on Exercise

Estimated complete time: 10-15 minutes (Resource Level: ðŸŒ)

Prerequisites â€“ To complete this exercise, you need the following
â€¢	AppStudio for ArcGIS Desktop 2.1  can be downloaded from 
http://doc.arcgis.com/en/appstudio/download/

â€¢	AppStudio for ArcGIS Player2.1 can be downloaded from 
http://doc.arcgis.com/en/appstudio/download/ 

Step 1. Create a new app using the Simple Layout (Material Design) template
â€¢	Download and install AppStudio Desktop
â€¢	Launch AppStudio Desktop
â€¢	Sign in using your ArcGIS Org account
â€¢	Click on the New App button
â€¢	Click on the Layouts tab
â€¢	Choose the Simple Layout (Material Design) template and click on the Create button

Step 2. Adding map and layers 
â€¢	Open the app in Qt Creator
o	Select the app you created from step 1, then click on the Edit tool
o	You would see Qt Creator IDE window open

â€¢	Start coding on MyApp.qml
o	Add import startement for Esri ArcGIS Runtime on the top of the page next to other import statements

         import Esri.ArcGISRuntime 100.1






o	Edit the Header title to â€œMy Mapping Applicationâ€
header: ToolBar{
            â€¦
            RowLayout{
                â€¦.
                Label {
                    â€¦.
                    text: qsTr("My Mapping Application")
                    â€¦.
                }
            }
        }

o	Add MapView code right after the Header section ends
header: ToolBar{
            â€¦..
}
// Header Section ends
// TODO:-Add Code here       
MapView{
    id:mapView
    anchors.fill:parent
}


o	Add Map and Basemap to MapView - BasemapImagery{}

MapView{
    id:mapView
    anchors.fill:parent
    Map{
       BasemapImagery{}
    }
}

o	Add Map Service in Map http://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer 
ArcGISMapImageLayer{
     id:mapServiceLayer                                  url:"http://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer"
 }




o	Set the viewpoint of the MapView to the Map service full extent on the onLoadStatusChanged event of the Map Service layer
ArcGISMapImageLayer{
â€¦
onLoadStatusChanged: {
   if(loadStatus === Enums.LoadStatusLoaded){                                     mapView.setViewpointGeometry(mapServiceLayer.fullExtent);
    }
}
â€¦
}


o	Add Feature Layer in the Map - http://sampleserver6.arcgisonline.com/arcgis/rest/services/Wildfire/MapServer/0 
FeatureLayer{
    id:citiesLayer
    visible: false
    featureTable:citiesFeatureTable
}
ServiceFeatureTable{
   id: citiesFeatureTable
   url: "http://sampleserver6.arcgisonline.com/arcgis/rest/services/Wildfire/MapServer/0"
}

Step 3. Add the Layer List to the Dialog
â€¢	Comment out the following lines from the Dialog
Dialog {
â€¦.
/*
        Label {
            id: message
            text: qsTr("Welcome to AppStudio!")
            opacity: 0.9
            wrapMode: Label.Wrap
            width: parent.width
            height: implicitHeight
        }
*/
â€¦..
}


â€¢	Change the title of the Dialog and add height properties
Dialog {
â€¦.
        title: qsTr("Layer List")
                 height: parent.height/3
â€¦.
}


â€¢	Replace the commented code with the following code
Dialog {
â€¦..

ListView {
            model: mapView.map.operationalLayers
            anchors.fill: parent
            delegate: RowLayout{
                spacing: 10
                Switch{
                    text:name
                    checked:layerVisible
                    onCheckedChanged: {
                        layerVisible = checked;

                    }
                }
            }
         }
â€¦.
}



â€ƒ
Step 4. Run the app 
â€¢	Go to Tools -> External -> AppStudio -> Run
â€¢	Or press SHIFT + ALT + R key on your keyboard for Windows or Mac

Your app should look like screenshots below,
 


